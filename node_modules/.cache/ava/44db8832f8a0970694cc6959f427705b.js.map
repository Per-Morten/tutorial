{"version":3,"sources":["api.test.js"],"names":["request","require","PersonModel","db","mongoose","person","firstname","lastname","address","postcode","cb","before","t","then","end","catch","err","fail","after","connection","dropDatabase","close","beforeEach","remove","createUser","Object","assign","user","server"],"mappings":";;AAAA;;;;;;AAEA,MAAMA,UAAUC,QAAQ,WAAR,CAAhB;AACA,MAAMC,cAAcD,QAAQ,aAAR,CAApB;AACA,MAAME,KAAKF,QAAQ,aAAR,CAAX;AACA,MAAMG,WAAWH,QAAQ,UAAR,CAAjB;;AAGA,MAAMI,SAAS;AACXC,eAAW,QADA;AAEXC,cAAU,QAFC;AAGXC,aAAS,qBAHE;AAIXC,cAAU;AAJC,CAAf;;AAQA,cAAKC,EAAL,CAAQC,MAAR,CAAgBC,CAAD,IAAO;AAClBT,OAAG,iBAAH,EACKU,IADL,CACU,MAAMD,EAAEE,GAAF,EADhB,EAEKC,KAFL,CAEWC,OAAOJ,EAAEK,IAAF,CAAOD,GAAP,CAFlB;AAGH,CAJD;AAKA,cAAKN,EAAL,CAAQQ,KAAR,CAAeN,CAAD,IAAO;AACjBR,aAASe,UAAT,CAAoBhB,EAApB,CAAuBiB,YAAvB,CAAoC,MAAM;AACtChB,iBAASe,UAAT,CAAoBE,KAApB;AACAT,UAAEE,GAAF;AACH,KAHD;AAIH,CALD;;AAQA,cAAKJ,EAAL,CAAQY,UAAR,CAAoBV,CAAD,IAAO;AACvBV,gBAAYqB,MAAZ,CAAmB,EAAnB,EAAuB,MAAM;AACxBrB,oBAAYsB,UAAZ,CAAuBC,OAAOC,MAAP,CAAc,EAAd,EAAkBrB,MAAlB,CAAvB,EACCQ,IADD,CACMc,QAAQ;AACV,gBAAGA,IAAH,EACIf,EAAEE,GAAF;AACP,SAJD,EAKCC,KALD,CAKOC,OAAOJ,EAAEK,IAAF,CAAQ,gCAA+BD,GAAI,EAA3C,CALd;AAMJ,KAPD;AAQF,CATD;;AAYA,MAAMY,SAAS3B,QAAQ,yBAAR,CAAf","file":"api.test.js","sourcesContent":["import test from 'ava';\n\nconst request = require('supertest');\nconst PersonModel = require('PersonModel');\nconst db = require('../database');\nconst mongoose = require('mongoose');\n\n\nconst person = {\n    firstname: 'Bjarte',\n    lastname: 'Larsen',\n    address: 'Prost bloms gate 38',\n    postcode: 2819,\n};\n\n\ntest.cb.before((t) => {\n    db('person-api-test')\n        .then(() => t.end())\n        .catch(err => t.fail(err));\n});\ntest.cb.after((t) => {\n    mongoose.connection.db.dropDatabase(() => {\n        mongoose.connection.close();\n        t.end();\n    })\n});\n\n\ntest.cb.beforeEach((t) => {\n   PersonModel.remove({}, () => {\n        PersonModel.createUser(Object.assign({}, person))\n        .then(user => {\n            if(user)\n                t.end();\n        })\n        .catch(err => t.fail(`Failed beforeeach with error ${err}`));\n   }) ;\n});\n\n\nconst server = require('../../../classes/App.js');"]}